<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friend Survey</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

</head>
<body>
    <div class="container">
        <form>
            <h1>Survey Questions</h1>
            <hr>
            <h2>About You</h2>
            <br>
            <div class="form-group">
                <p>Name (Required)</p>
                <input id="name" type="name" class="form-control" required>
            </div>
            <div class="form-group my-5">
                <p>Link to an Image (Required)</p>
                <input id="photo" class="form-control" required>
            </div>
            <hr>
            <div class="form-group">
                <div class="survey my-5">
                    <h2>Question 1</h2>
                    <p>Chocolate is better than Vanilla.</p>
                    <select class="form-control" id="q1">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 2</h2>
                    <p>You like to get out of your comfort-zone.</p>
                    <select class="form-control" id="q2">
                    <option>1 (Strongly Disagree)</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 3</h2>
                    <p>You enjoy meeting new people.</p>
                    <select class="form-control" id="q3">
                    <option>1 (Strongly Disagree)</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 4</h2>
                    <p>Cats are better pets than dogs.</p>
                    <select class="form-control" id="q4">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 5</h2>
                    <p>Traveling is fun.</p>
                    <select class="form-control" id="q5">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 6</h2>
                    <p>You have a vivid imagination.</p>
                    <select class="form-control" id="q6">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 7</h2>
                    <p>You love large parties.</p>
                    <select class="form-control" id="q7">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 8</h2>
                    <p>It is easy for you to relate to other people's feelings.</p>
                    <select class="form-control" id="q8">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 9</h2>
                    <p>You would rather stay home than go out on a weekend.</p>
                    <select class="form-control" id="q9">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="survey my-5">
                    <h2>Question 10</h2>
                    <p>It is difficult for you to trust in others.</p>
                    <select class="form-control" id="q10">
                      <option>1 (Strongly Disagree)</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5 (Strongly Agree)</option>
                    </select>
                </div>
                    
                <button type="submit" class="btn btn-primary submit" id="submit">Submit</button>
              </div>
        </form>
 
        <!-- Modal -->

        <div id="friendModal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Your new best friend is...</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <h4 id="bestieNm"></h4>
                  <img id="bestieImg">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('#submit').on("click", function(event) {
            event.preventDefault();
            var newFriend = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                scores: [
                $('#q1').val(),
                $('#q2').val(),
                $('#q3').val(),
                $('#q4').val(),
                $('#q5').val(),
                $('#q6').val(),
                $('#q7').val(),
                $('#q8').val(),
                $('#q9').val(),
                $('#q10').val()
                ]
            };

            // console.log('Your results: ', JSON.stringify(newFriend)); 

            // POST data to friends.js
            $.post("/api/friends", newFriend).then(function(data) {
                // console.log("friend data:", JSON.stringify(data));
               $('#bestieNm').html(data.name);
               $('#bestieImg').attr("src", data.photo);
               $('#friendModal').modal('toggle');
            });

            // Clear form inputs
            $('#name').val("");
            $('#photo').val("");
            $('#q1').val("");
            $('#q2').val("");
            $('#q3').val("");
            $('#q4').val("");
            $('#q5').val("");
            $('#q6').val("");
            $('#q7').val("");
            $('#q8').val("");
            $('#q9').val("");
            $('#q10').val("");

        });
    });
</script>
</body>
</html>